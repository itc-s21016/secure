# 4-5 重要な処理の際に混入する脆弱性
## クロスサイト・リクエストフォージェリ(CSRF)
Webアプリケーションにはログインした利用者のアカウントにより、取り消しできない重要な処理が実行できるものがあり、その重要な処理に関係する脆弱性の一つ
重要な処理の受付の際に、利用者の意図したリクエストであることを確認する必要があるが、その確認処理が抜けていると罠のサイトを閲覧しただけで、
利用者のブラウザから勝手に重要な処理が実行される場合があります。このような問題を引き起こす脆弱性をクロスサイト・フォージェリ(CSRF)脆弱性と呼び、
またCSRF脆弱性を利用した攻撃をCSRF攻撃といいます。

## 攻撃手法
### 入力ー実行パターンのCSRF攻撃
1. 攻撃者が罠を用意する
2. 被害者が罠を閲覧する
3. 罠のJavaScriptにより、被害者のブラウザ上で攻撃対象サイトに対し、新しいパスワードがPOSTメソッドにより送信される
4. パスワードが変更される

## 対策
SCRF攻撃を防ぐには重要な処理に対するリクエストが正規の利用者の意図したものであることを確認する必要があるため、
- CSRF対策の必要なページを区別する
- 正規利用者の意図したリクエストを確認できるよう実装する
の2点を実施します

具体的には、秘密情報の埋め込み、パスワードの再入力、Refererのチェックがあります。
